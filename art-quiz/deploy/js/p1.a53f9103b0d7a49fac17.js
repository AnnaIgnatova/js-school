(()=>{"use strict";const e=document.querySelector(".welcome"),t=document.querySelector(".categories"),n=document.querySelector(".score"),a=document.querySelector(".pic-question"),s=document.querySelector(".artist-question"),o=document.querySelector(".settings"),r=[];fetch("images/images-en.json").then((e=>e.json())).then((e=>{r.push(...e)}));const c={"artist-category":[[],[],[],[],[],[],[],[],[],[],[],[]],"pic-category":[[],[],[],[],[],[],[],[],[],[],[],[]]};let i="",l=e,u=0,d=0,m=0;function g(e){i=e}function y(e){l=e}function p(e){u=e}function f(e){d=e}function h(){return i}function v(){return l}function S(){return d}function q(){return u}function L(e){m=e}function k(){return m}const E="hidden";function w(e){const t=[...e];let n,a,s=e.length;for(;0!==s;)a=Math.floor(Math.random()*s),s-=1,n=t[s],t[s]=t[a],t[a]=n;return t}function N(e,t){const n=e,a=t;n.style.animation="hide 0.3s",setTimeout((()=>{a.style.animation="show 0.3s",n.style.animation="",t.classList.remove(E),e.classList.add(E),setTimeout((()=>{a.style.animation=""}),200)}),200)}function A(e){const t=e;t.style.animation="showCard 0.5s",setTimeout((()=>{t.style.opacity=1,t.style.animation=""}),500)}function x(e){const t=e;t.classList.remove(E),t.style.animation="showModal 0.3s",setTimeout((()=>{t.style.animation=""}),200)}function T(e){const t=e;t.style.animation="hideModal 0.3s",setTimeout((()=>{t.classList.add(E),t.style.animation=""}),200)}const $=(t,n)=>{const a=n;a===e&&(e.style.opacity=0);const s=new Image;s.src=t,s.onload=()=>{a.style.backgroundImage=`url(${t})`}},b="pic-category",C=document.querySelector(".modal-wrapper-answer"),F=document.querySelector(".modal-wrapper-quit");let M="";function I(e){const{name:t}=r[e],{author:n}=r[e],{year:a}=r[e];C.querySelector(".answer-img").style.backgroundImage=`url(./images/img/${e}.jpg)`,C.querySelector(".pic-name-answer").textContent=t,C.querySelector(".artist-answer").textContent=`${n}, ${a}`}function B(e){M=e}F.addEventListener("click",(n=>{const{target:o}=n,r=h();("BUTTON"===o.tagName&&"Cancel"===o.textContent||o.classList.contains("close-modal")||o.parentNode.classList.contains("close-modal")||o.classList.contains("modal-wrapper-quit"))&&(T(F),y(r===b?a:s)),"BUTTON"===o.tagName&&"Yes"===o.textContent&&(T(F),y(t),y("welcome"===M?e:t),N(r===b?a:s,v()))}));const j=document.createElement("audio"),O=document.createElement("audio"),H=document.createElement("audio");function U(){H.play(),setTimeout((()=>{H.pause(),H.currentTime=0}),1e3)}function J(){j.play(),setTimeout((()=>{j.pause(),j.currentTime=0}),1e3)}function R(){O.play(),setTimeout((()=>{O.pause(),O.currentTime=0}),1e3)}function Y(e){[j,O,H].forEach((t=>{t.volume=e}))}j.src="./audio/win.mp3",O.src="./audio/lose.mp3",H.src="./audio/end-game.mp3",e.append(j,O,H),Y(.5);const W="hidden",z=document.querySelector(".right"),K=document.querySelector(".wrong"),P=document.querySelector(".pic-question-pics"),D=function(e,t,n){const a=[],s=e;let o=s,i=`./images/full/${s}full.jpg`;a.push({imageNum:o,imageURL:i});for(let t=1;t<4;t++){for(o=Math.floor(241*Math.random()+0),i=`./images/full/${o}full.jpg`;+o==+e&&-1!==a.indexOf(i);)o=Math.floor(241*Math.random()+0),i=`./images/full/${o}full.jpg`;a.push({imageNum:o,imageURL:i})}P.innerHTML="";const l=w(a.map((e=>{const t=document.createElement("div");return t.dataset.index=e.imageNum,t.dataset.author=r[e.imageNum].author,t.dataset.name=r[e.imageNum].name,t.dataset.year=r[e.imageNum].year,t.style.opacity=0,t.classList.add("pic-question-pic"),$(e.imageURL,t),t})));l.forEach((e=>{e.addEventListener("click",(()=>{const t=h();let a=S(),o=k();+e.dataset.index==+s?(J(),z.classList.remove(W),K.classList.add(W),a++,f(a),c[t][n-1].push(!0)):(R(),z.classList.add(W),K.classList.remove(W),c[t][n-1].push(!1)),x(C),I(s),o++,L(o)}))})),l.map(((e,t)=>(P.append(e),setTimeout((()=>{A(e)}),300*(t+1)),e)))},G="hidden",Q=document.querySelector(".artist-question-btns"),V=document.querySelector(".artist-question-pic"),X=document.querySelector(".right"),Z=document.querySelector(".wrong"),_=function(e,t,n){const a=[],s=+e;let o=+e;$(`./images/full/${o}full.jpg`,V),V.style.opacity=0,setTimeout((()=>{A(V)}),300);let i=r[o].author;a.push({artist:i,artistNum:o});for(let t=1;t<4;t++){for(o=Math.floor(241*Math.random()+0),i=r[o].author;+o==+e&&-1!==a.indexOf({artist:i,artistNum:o});)i=r[o].author,o=Math.floor(241*Math.random()+0);a.push({artist:i,artistNum:o})}Q.innerHTML="";const l=w(a.map((e=>{const t=document.createElement("button");return t.className="question-btn",t.dataset.index=e.artistNum,t.dataset.author=r[e.artistNum].author,t.dataset.name=r[e.artistNum].name,t.dataset.year=r[e.artistNum].year,t.textContent=t.dataset.author,t})));l.forEach((e=>{e.addEventListener("click",(()=>{const t=h();let a=k(),o=S();+e.dataset.index==+s?(J(),X.classList.remove(G),Z.classList.add(G),o++,f(o),c[t][n-1].push(!0)):(R(),X.classList.add(G),Z.classList.remove(G),c[t][n-1].push(!1)),x(C),I(s),a++,L(a)}))})),l.forEach((e=>Q.append(e)))},ee="linear-gradient(to right, #FFBCA2 0%, #FFBCA2 50%, #A4A4A4 50%, white 100%)",te=document.querySelector(".volume-input"),ne=document.querySelectorAll(".welcome-settings"),ae=document.querySelector(".close-icon"),se=document.querySelector(".switch-time"),oe=document.querySelector(".mute-sound"),re=document.querySelector(".max-sound"),ce=document.querySelector(".settings-default-btn"),ie=document.querySelector(".setting-save-btn"),le=document.querySelector(".settings-time-to-answer");let ue;function de(){ue=[te.value,`linear-gradient(to right, #FFBCA2 0%, #FFBCA2 ${te.value}%, #A4A4A4 ${te.value}%, white 100%)`,se.checked,le.querySelector(".time-to-answer-input").value],localStorage.setItem("settings-info",JSON.stringify(ue))}JSON.parse(localStorage.getItem("settings-info"))?ue=JSON.parse(localStorage.getItem("settings-info")):(ue=[50,ee,!1,20],localStorage.setItem("settings-info",JSON.stringify(ue))),se.checked=ue[2],te.style.background=ue[1],te.value=ue[0],le.querySelector(".time-to-answer-input").value=ue[3],te.addEventListener("input",(e=>{const{target:t}=e,{value:n}=t;t.style.background=`linear-gradient(to right, #FFBCA2 0%, #FFBCA2 ${n}%, #A4A4A4 ${n}%, white 100%)`,Y(n/100),de()})),o.addEventListener("click",(t=>{(t.target.classList.contains("settings-back")||t.target.parentElement.classList.contains("settings-back"))&&(y(e),N(o,e))})),ne.forEach((e=>{e.addEventListener("click",(()=>{N(v(),o)}))})),ae.addEventListener("click",(()=>{const e=v();N(o,e)})),oe.addEventListener("click",(()=>{te.style.background="linear-gradient(to right, #FFBCA2 0%, #FFBCA2 0%, #A4A4A4 0%, white 100%)",te.value=0,Y(0)})),re.addEventListener("click",(()=>{te.style.background="linear-gradient(to right, #FFBCA2 0%, #FFBCA2 100%, #A4A4A4 100%, white 100%)",te.value=100,Y(1)})),ce.addEventListener("click",(function(){se.checked=!1,te.style.background=ee,te.value=50,le.querySelector(".time-to-answer-input").value=20,de()})),ie.addEventListener("click",(()=>{const e=v();N(o,e)})),le.addEventListener("click",(e=>{const{target:t}=e,n=le.querySelector(".time-to-answer-input");t.classList.contains("more-btn")&&(+n.value>=30?n.value=30:n.value=+n.value+5),t.classList.contains("less-btn")&&(+n.value<=5?n.value=5:n.value=+n.value-5),de()})),se.addEventListener("input",de);const me="pic-category",ge="hidden",ye=document.querySelector(".next-picture"),pe=document.querySelector(".modal-wrapper-end-game");let fe,he,ve;function Se(e){x(pe),pe.querySelector(".points").textContent=`${e}/10`}const qe=document.querySelector(".score-cards");function Le(e,t,a,s,o,r){const i=h(),l=document.createElement("div");l.className="score-card",l.innerHTML=`\n      <div class="score-card-info">\n        <span>${t}</span>\n        <span>${e}, ${a}</span>\n      </div>\n      <div class="score-card-img"></div>  \n    `;const u=l.querySelector(".score-card-img");$(`./images/img/${s}.jpg`,u),c[i][o-1][r]?u.style.filter="grayscale(0%)":u.style.filter="grayscale(100%)",u.addEventListener("click",(()=>{const e=u.previousElementSibling;!function(e){const t=e;t.style.animation="showCardInfoFrom 0.5s",t.addEventListener("animationend",(()=>{t.style.transform="translateY(0)",t.style.animation=""}))}(e),function(e){const t=e;t.addEventListener("click",(()=>{t.style.animation="showCardInfoBack 0.5s",t.addEventListener("animationend",(()=>{t.style.transform="translateY(250px)",t.style.animation=""}))}))}(e),y(n)})),qe.append(l)}const ke={renderScore:function(e,t,n){qe.innerHTML="";let a=0;for(let s=e;s<=t;s++){const{author:e,name:t,year:o,imageNum:c}=r[s];Le(e,t,o,c,n,a),a++}}},Ee=["Portrait","Landscape","Still life","Impressionism","Expressionism","Avant-garde","Renaissance","Surrealism","Kitsch","Minimalism","Interior","Nude"],we="hidden",Ne="pic-category",Ae=document.querySelector(".categories-cards"),xe=document.querySelector(".modal-next-quiz"),Te=document.querySelector(".modal-home-link"),$e=document.querySelector(".modal-wrapper-end-game");function be(){p(h()===Ne?120:0),f(0),L(0),Ae.innerHTML=""}const Ce=()=>{be(),Ee.map(((e,o)=>{const i=((e,o)=>{let i=q();const l=h(),u=document.createElement("div");u.className="category-card";let d=0;c[l][o-1].map((e=>(e&&d++,d))),u.innerHTML=`\n      <div class="card-info">\n        <span class="card-name">${e}</span>\n        <span class="card-points">${d}/10</span>\n      </div>\n      <div class="card-img">\n        <div class="card-play-info">Score</div>\n      </div>\n    `;const m=u.querySelector(".card-img"),g=u.querySelector(".card-play-info");return m.dataset.start=i,m.dataset.end=i+9,m.dataset.index=o,i+=10,p(i),$(`./images/${l}/${o}.jpg`,m),d?(m.style.filter="grayscale(0%)",g.classList.remove(we)):(m.style.filter="grayscale(100%)",g.classList.add(we)),m.addEventListener("click",(e=>{const n=h();e.target.classList.contains("card-play-info")||(y(n===Ne?a:s),0!==c[n][o-1].length&&(c[n][o-1]=[]),function(e,n,o){if(h()===me?(fe=a.querySelector(".progress-time"),he=a.querySelector(".progress-line"),ve=a.querySelector(".question-progress")):(fe=s.querySelector(".progress-time"),he=s.querySelector(".progress-line"),ve=s.querySelector(".question-progress")),se.checked){ve.classList.remove(ge);let e=+le.querySelector(".time-to-answer-input").value,t=!1;const n=100/e;let o=100;fe.textContent=`0:${String(e).padStart(2,"0")}`,he.style.background="linear-gradient(to right, #ffbca2 0%, #ffbca2 100%, #a4a4a4 100%, #a4a4a4 100%)";const r=setInterval((()=>{e--,o-=n,fe.textContent=`0:${String(e).padStart(2,"0")}`,he.style.background=`linear-gradient(to right, #ffbca2 0%, #ffbca2 ${o}%, #a4a4a4 ${o}%, #a4a4a4 100%)`,v()!==a&&v()!==s&&(t=!0,clearInterval(r))}),1e3);setTimeout((()=>{v()!==a&&v()!==s||t||(Se(S()),U(),T(C),t=!1),clearInterval(r)}),1e3*e)}else ve.classList.add(ge);const c=h();let i;y(c===me?a:s);let l=e;f(0),c===me?(N(t,a),i=document.querySelector(".pic-question-text"),i.textContent=`What is ${r[e].author} picture`,D(l,0,o.dataset.index)):(N(t,s),_(l,0,o.dataset.index)),ye.addEventListener("click",(()=>{T(C);const e=k(),t=S(),n=h();10===e?(Se(t),U()):(l++,n===me?(i.textContent=`What is ${r[l].author} picture`,D(l,0,o.dataset.index)):_(l,0,o.dataset.index))}))}(e.target.dataset.start,e.target.dataset.end,m))})),g.addEventListener("click",(e=>{y(n);const a=+e.target.parentNode.dataset.start,s=+e.target.parentNode.dataset.end,o=+e.target.parentNode.dataset.index;N(t,n),ke(a,s,o)})),u.style.opacity=0,u})(e,o+1);return Ae.append(i),setTimeout((()=>{A(i)}),200*(o+1)),i}))};xe.addEventListener("click",(()=>{const e=v();T($e),Ce(),N(e,t),y(t)})),Te.addEventListener("click",(()=>{const t=v();T($e),N(t,e),y(e)}));const Fe=document.querySelectorAll(".score-header"),Me=document.querySelectorAll(".home-link");function Ie(n){const o=v(),{target:r}=n;(r.classList.contains("score-home-link")||r.parentNode.classList.contains("score-home-link"))&&(o===a||o===s?(x(F),B("welcome")):(N(o,e),y(e))),(r.classList.contains("score-category-link")||r.parentNode.classList.contains("score-category-link"))&&(Ce(),o===a||o===s?(x(F),B("category")):(N(o,t),y(t)))}Fe.forEach((e=>{e.addEventListener("click",Ie)})),Me.forEach((t=>{t.addEventListener("click",(()=>{N(v(),e),y(e)}))}));const Be=document.querySelector(".pictures-btn"),je=document.querySelector(".artists-btn");$("./images/welcome.jpg",e),setTimeout((()=>{!function(e){const t=e;t.style.animation="show 0.5s",setTimeout((()=>{t.style.opacity=1,t.style.animation=""}),500)}(e)}),300),je.addEventListener("click",(()=>{p(0),g("artist-category"),be(),Ce(),N(e,t),y(t)})),Be.addEventListener("click",(()=>{p(120),g("pic-category"),be(),Ce(),N(e,t),y(t)}))})();